<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Tiempos Litúrgicos del Año</title>
  <!-- Importar Open Sans para soporte completo de caracteres extendidos -->
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Open Sans', Arial, Helvetica, sans-serif;
      padding: 20px;
    }

    #info {
      margin-bottom: 16px;
      font-size: 14px;
    }

    #chart {
      position: relative;
      width: 580px;
      height: 70px;
    }

    svg {
      overflow: visible;
    }

    .tooltip {
      position: absolute;
      background: rgba(0, 0, 0, 0.7);
      color: #fff;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.1s;
      white-space: nowrap;
      transform: translate(-50%, -120%);
    }
  </style>
</head>
<body>
  <div id="info"></div>

  <h2>Tiempos Litúrgicos del Año</h2>
  <div id="chart">
    <svg id="litYear" width="580" height="70"></svg>
    <div class="tooltip" id="tooltip"></div>
  </div>

  <script>
    // 1) Datos de los tiempos litúrgicos
    const seasons = [
      { name: "Adviento",            weeks: 4,  color: "#800080", textColor: "#fff" },
      { name: "Navidad",             weeks: 2,  color: "#FFFFE0", textColor: "#000", stroke: "#000" },
      { name: "Tiempo Ordinario I",  weeks: 6,  color: "#008000", textColor: "#fff" },
      { name: "Cuaresma",            weeks: 6,  color: "#800080", textColor: "#fff" },
      { name: "Pascua",              weeks: 7,  color: "#FFFFE0", textColor: "#000", stroke: "#000" },
      { name: "Tiempo Ordinario II", weeks: 27, color: "#008000", textColor: "#fff" }
    ];

    // 2) Fechas de inicio y fin del año litúrgico
    const now   = new Date();
    let start   = new Date(now.getFullYear(), 11, 1);
    if (now < start) start = new Date(now.getFullYear() - 1, 11, 1);
    const next  = new Date(start.getFullYear() + 1, 11, 1);

    // 3) Determinar tiempo actual y fecha de culminación
    const totalWeeks    = seasons.reduce((sum, s) => sum + s.weeks, 0);
    const elapsedWeeks  = (now - start) / (1000 * 60 * 60 * 24 * 7);
    let weekSum = 0, currentSeason, endWeekSum = 0;

    for (const s of seasons) {
      weekSum += s.weeks;
      if (elapsedWeeks <= weekSum) {
        currentSeason = s;
        endWeekSum     = weekSum;
        break;
      }
    }

    // Fecha en que culmina el tiempo actual
    const endDate = new Date(start.getTime() + endWeekSum * 7 * 24 * 60 * 60 * 1000);
    const dd = String(endDate.getDate()).padStart(2, "0");
    const mm = String(endDate.getMonth() + 1).padStart(2, "0");

    // Texto informativo al inicio
    const info = document.getElementById("info");
    const longDate = now.toLocaleDateString("es-VE", {
      weekday: "long", year: "numeric", month: "long", day: "numeric"
    });
    info.innerHTML =
      `Hoy es ${longDate}.<br>` +
      `Estamos en tiempo <strong>${currentSeason.name}</strong> y culmina el día ${dd}/${mm}.`;

    // 4) Dibujo de la línea de tiempos y tooltips
    const svg     = document.getElementById("litYear");
    const tooltip = document.getElementById("tooltip");
    const chart   = document.getElementById("chart");
    const chartW  = +svg.getAttribute("width") - 20;
    const chartH  = +svg.getAttribute("height") - 20;
    let   x       = 10;

    seasons.forEach(s => {
      const segW = (s.weeks / totalWeeks) * chartW;
      // rectángulo
      const rect = document.createElementNS(svg.namespaceURI, "rect");
      rect.setAttribute("x",      x);
      rect.setAttribute("y",      10);
      rect.setAttribute("width",  segW);
      rect.setAttribute("height", chartH);
      rect.setAttribute("fill",   s.color);
      if (s.stroke) rect.setAttribute("stroke", s.stroke);
      svg.appendChild(rect);

      // etiqueta
      const text = document.createElementNS(svg.namespaceURI, "text");
      text.setAttribute("x",           x + segW / 2);
      text.setAttribute("y",           10 + chartH / 2 + 5);
      text.setAttribute("fill",        s.textColor);
      text.setAttribute("font-size",   "12");
      text.setAttribute("text-anchor", "middle");
      text.textContent = s.name;
      svg.appendChild(text);

      // tooltip semanas
      rect.addEventListener("mousemove", e => {
        const box = chart.getBoundingClientRect();
        tooltip.textContent   = `${s.weeks} semanas`;
        tooltip.style.left    = `${e.clientX - box.left}px`;
        tooltip.style.top     = `${e.clientY - box.top}px`;
        tooltip.style.opacity = 1;
      });
      rect.addEventListener("mouseout", () => {
        tooltip.style.opacity = 0;
      });

      x += segW;
    });

    // línea azul y tooltip fecha actual
    const pos = ((now - start) / (next - start)) * chartW + 10;
    const line = document.createElementNS(svg.namespaceURI, "line");
    line.setAttribute("x1", pos);
    line.setAttribute("y1", 5);
    line.setAttribute("x2", pos);
    line.setAttribute("y2", chartH + 15);
    line.setAttribute("stroke", "#0000FF");
    line.setAttribute("stroke-width", 2);
    svg.appendChild(line);

    line.addEventListener("mousemove", e => {
      const box = chart.getBoundingClientRect();
      tooltip.textContent   = now.toLocaleDateString("es-VE");
      tooltip.style.left    = `${e.clientX - box.left}px`;
      tooltip.style.top     = `${e.clientY - box.top}px`;
      tooltip.style.opacity = 1;
    });
    line.addEventListener("mouseout", () => {
      tooltip.style.opacity = 0;
    });
  </script>
</body>
</html>
```